<form [formGroup]="withholdingForm" (ngSubmit)="onSubmit()" class="withholding-form">
    <div class="form-header">
      <h2>Employee's Withholding Allowance Certificate</h2>
      <p>Complete this form so that your employer can withhold the correct California state income tax from your pay.</p>
    </div>
  
    <!-- Personal Information -->
    <div class="section">
      <h3>Personal Information</h3>
      <div class="form-row">
        <div class="form-group full-width">
          <label>First, Middle, Last Name</label>
          <input type="text" formControlName="fullName">
        </div>
      </div>
  
      <div class="form-row">
        <div class="form-group">
          <label>Social Security Number</label>
          <input type="text" formControlName="socialSecurity">
        </div>
      </div>
  
      <div class="form-row">
        <div class="form-group full-width">
          <label>Address</label>
          <input type="text" formControlName="address">
        </div>
      </div>
  
      <div class="form-row">
        <div class="form-group">
          <label>City</label>
          <input type="text" formControlName="city">
        </div>
        <div class="form-group small">
          <label>State</label>
          <input type="text" formControlName="state">
        </div>
        <div class="form-group small">
          <label>ZIP Code</label>
          <input type="text" formControlName="zipCode">
        </div>
      </div>
  
      <div class="filing-status">
        <label>Filing Status</label>
        <div class="radio-group">
          <label>
            <input type="radio" formControlName="filingStatus" value="single">
            Single or Married (with two or more incomes)
          </label>
          <label>
            <input type="radio" formControlName="filingStatus" value="married">
            Married (one income)
          </label>
          <label>
            <input type="radio" formControlName="filingStatus" value="head">
            Head of Household
          </label>
        </div>
      </div>
    </div>
  
    <!-- Allowances Section -->
    <div class="section">
      <div class="form-row">
        <div class="form-group">
          <label>1a. Number of Regular Withholding Allowances (Worksheet A)</label>
          <input type="number" formControlName="regularAllowances" (change)="calculateTotalAllowances()">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>1b. Number of allowances from Estimated Deductions (Worksheet B)</label>
          <input type="number" formControlName="estimatedDeductions" (change)="calculateTotalAllowances()">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>1c. Total Number of Allowances you are claiming</label>
          <input type="number" formControlName="totalAllowances" readonly>
        </div>
      </div>
    </div>
  
    <!-- Additional Withholding -->
    <div class="section">
      <div class="form-row">
        <div class="form-group">
          <label>2. Additional amount you want withheld each pay period (if employer agrees)</label>
          <div class="input-group">
            <span class="currency">$</span>
            <input type="number" formControlName="additionalAmount">
          </div>
        </div>
      </div>
    </div>
  
    <!-- Exemption Section -->
    <div class="section">
      <h3>Exemption from Withholding</h3>
      <div class="checkbox-group">
        <label>
          <input type="checkbox" formControlName="exemptionClaim">
          3. I claim exemption from withholding for 2025, and I certify I meet both conditions for exemption.
        </label>
        <label>
          <input type="checkbox" formControlName="militaryExemption">
          4. I certify under penalty of perjury that I am not subject to California withholding under the Service Member Civil Relief Act.
        </label>
      </div>
    </div>
  
    <!-- Signature Section -->
    <div class="section">
      <div class="certification-text">
        Under penalty of perjury, I certify that the number of withholding allowances claimed on this certificate does not exceed the number to which I am entitled or, if claiming exemption from withholding, that I am entitled to claim the exempt status.
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Employee's Signature</label>
          <input type="text" formControlName="employeeSignature">
        </div>
        <div class="form-group">
          <label>Date</label>
          <input type="date" formControlName="signatureDate">
        </div>
      </div>
    </div>
  
    <!-- Employer Section -->
    <div class="section employer-section">
      <h3>Employer's Section</h3>
      <div class="form-row">
        <div class="form-group full-width">
          <label>Employer's Name and Address</label>
          <input type="text" formControlName="employerName">
          <input type="text" formControlName="employerAddress">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>California Employer Payroll Tax Account Number</label>
          <input type="text" formControlName="payrollTaxNumber">
        </div>
      </div>
    </div>
  
    <div class="button-group">
      <button type="submit">Submit Form</button>
      <button type="reset">Reset Form</button>
    </div>
  </form>